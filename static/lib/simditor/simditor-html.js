!function(t,e){"function"==typeof define&&define.amd?define("simditor-html",["jquery","simditor","html_beautify"],function(r,i,o){return t.HTMLButton=e(r,i,o)}):"object"==typeof exports?module.exports=e(require("jquery"),require("simditor"),require("js_beautify")):t.SimditorHTML=e(jQuery,Simditor,html_beautify)}(this,function(t,e,r){var i,o=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty,a=[].slice;return i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.name="html",e.prototype.icon="html5",e.prototype.needFocus=!1,e.prototype._init=function(){return e.__super__._init.call(this),this.editor.textarea.on("focus",function(t){return function(e){return t.editor.el.addClass("focus").removeClass("error")}}(this)),this.editor.textarea.on("blur",function(t){return function(e){return t.editor.el.removeClass("focus"),t.editor.setValue(t.editor.textarea.val())}}(this)),this.editor.textarea.on("input",function(t){return function(e){return t._resizeTextarea()}}(this))},e.prototype.status=function(){},e.prototype.command=function(){var t,e,r,i;for(this.editor.blur(),this.editor.el.toggleClass("simditor-html"),this.editor.htmlMode=this.editor.el.hasClass("simditor-html"),this.editor.htmlMode?(this.editor.hidePopover(),this.editor.textarea.val(this.beautifyHTML(this.editor.textarea.val())),this._resizeTextarea()):this.editor.setValue(this.editor.textarea.val()),i=this.editor.toolbar.buttons,e=0,r=i.length;e<r;e++)t=i[e],"html"===t.name?t.setActive(this.editor.htmlMode):t.setDisabled(this.editor.htmlMode);return null},e.prototype.beautifyHTML=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],r.html?r.html.apply(r,t):r.apply(null,t)},e.prototype._resizeTextarea=function(){return this._textareaPadding||(this._textareaPadding=this.editor.textarea.innerHeight()-this.editor.textarea.height()),this.editor.textarea.height(this.editor.textarea[0].scrollHeight-this._textareaPadding)},e}(e.Button),e.Toolbar.addButton(i),i});